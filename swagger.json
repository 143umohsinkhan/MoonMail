{"swagger":"2.0","info":{"version":"1.0.0","title":"MoonMail-v2"},"host":"mkre901l1e.execute-api.us-east-1.amazonaws.com","basePath":"/dev","schemes":["https"],"produces":["application/json"],"consumes":["application/json"],"security":[{"Bearer":[]}],"tags":[{"name":"Campaigns"},{"name":"Lists"},{"name":"Recipients"},{"name":"Links"}],"paths":{"/campaigns":{"get":{"tags":["Campaigns"],"parameters":[{"$ref":"#/parameters/Fields"},{"$ref":"#/parameters/IncludeFields"},{"$ref":"#/parameters/Page"}],"responses":{"200":{"description":"Success","schema":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/definitions/FullCampaign"}},"nextPage":{"$ref":"#/definitions/NextPage"},"prevPage":{"$ref":"#/definitions/PrevPage"}}}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"post":{"tags":["Campaigns"],"parameters":[{"$ref":"#/parameters/CreateCampaign"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/FullCampaign"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}},"/campaigns/{campaignId}":{"get":{"tags":["Campaigns"],"parameters":[{"$ref":"#/parameters/CampaignId"},{"$ref":"#/parameters/Fields"},{"$ref":"#/parameters/IncludeFields"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/FullCampaign"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"delete":{"tags":["Campaigns"],"parameters":[{"$ref":"#/parameters/CampaignId"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Empty"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"patch":{"tags":["Campaigns"],"parameters":[{"$ref":"#/parameters/CampaignId"},{"$ref":"#/parameters/UpdateCampaign"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/FullCampaign"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}},"/campaigns/{campaignId}/send":{"post":{"tags":["Campaigns"],"parameters":[{"$ref":"#/parameters/CampaignId"},{"$ref":"#/parameters/UpdateCampaign"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Campaign"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}},"/campaigns/{campaignId}/duplicate":{"post":{"tags":["Campaigns"],"parameters":[{"$ref":"#/parameters/CampaignId"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/FullCampaign"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}},"/links/click/{campaignId}/{linkId}":{"get":{"tags":["Links"],"parameters":[{"$ref":"#/parameters/CampaignId"},{"$ref":"#/parameters/LinkId"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Empty"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}},"/links/open/{campaignId}":{"get":{"tags":["Links"],"parameters":[{"$ref":"#/parameters/CampaignId"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Empty"}},"400":{"description":"400 response"}}}},"/lists":{"get":{"tags":["Lists"],"parameters":[{"$ref":"#/parameters/Fields"},{"$ref":"#/parameters/IncludeFields"},{"$ref":"#/parameters/Page"}],"responses":{"200":{"description":"Success","schema":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/definitions/List"}},"nextPage":{"$ref":"#/definitions/NextPage"},"prevPage":{"$ref":"#/definitions/PrevPage"}}}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"post":{"tags":["Lists"],"parameters":[{"$ref":"#/parameters/CreateList"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/List"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}},"/lists/{listId}":{"get":{"tags":["Lists"],"parameters":[{"$ref":"#/parameters/ListId"},{"$ref":"#/parameters/Fields"},{"$ref":"#/parameters/IncludeFields"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/List"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"delete":{"tags":["Lists"],"parameters":[{"$ref":"#/parameters/ListId"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Empty"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"patch":{"tags":["Lists"],"parameters":[{"$ref":"#/parameters/ListId"},{"$ref":"#/parameters/UpdateList"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/List"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}},"/lists/{listId}/recipients":{"get":{"tags":["Recipients"],"parameters":[{"$ref":"#/parameters/ListId"},{"$ref":"#/parameters/Fields"},{"$ref":"#/parameters/IncludeFields"},{"$ref":"#/parameters/RecipientsFilter"},{"$ref":"#/parameters/Page"}],"responses":{"200":{"description":"Success","schema":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/definitions/Recipient"}},"nextPage":{"$ref":"#/definitions/NextPage"},"prevPage":{"$ref":"#/definitions/PrevPage"}}}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"post":{"tags":["Recipients"],"parameters":[{"$ref":"#/parameters/ListId"},{"$ref":"#/parameters/CreateRecipient"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Empty"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}},"/lists/{listId}/recipients/{recipientId}":{"get":{"tags":["Recipients"],"parameters":[{"$ref":"#/parameters/ListId"},{"$ref":"#/parameters/RecipientId"},{"$ref":"#/parameters/Fields"},{"$ref":"#/parameters/IncludeFields"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Recipient"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"delete":{"tags":["Recipients"],"parameters":[{"$ref":"#/parameters/ListId"},{"$ref":"#/parameters/RecipientId"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Empty"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}},"patch":{"tags":["Recipients"],"parameters":[{"$ref":"#/parameters/ListId"},{"$ref":"#/parameters/RecipientId"},{"$ref":"#/parameters/UpdateRecipient"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Recipient"}},"401":{"$ref":"#/responses/AuthError"},"422":{"$ref":"#/responses/UncrossableEntity"},"default":{"$ref":"#/responses/GeneralError"}}}}},"securityDefinitions":{"Bearer":{"type":"apiKey","name":"Authorization","in":"header","description":"'Authorization header. api_key value should contain: Bearer ${JsonWebToken}. Separated by space'"}},"parameters":{"Page":{"name":"page","in":"query","description":"hash value to get next or previous page","type":"string"},"Fields":{"name":"fields","in":"query","description":"list of coma separated field names","type":"string"},"IncludeFields":{"name":"include_fields","in":"query","description":"if true field names in fields parameter would be included in response, otherwise excluded","type":"boolean"},"CampaignId":{"name":"campaignId","in":"path","required":true,"type":"string"},"ListId":{"name":"listId","in":"path","required":true,"type":"string"},"LinkId":{"name":"linkId","in":"path","required":true,"type":"string"},"RecipientsFilter":{"name":"filter","in":"query","description":"one of subscribed, unsubscribed, awaiting, bounced, spam","type":"string"},"RecipientId":{"name":"recipientId","in":"path","required":true,"type":"string"},"CreateCampaign":{"name":"campaign","in":"body","description":"data to create a campaign","required":true,"schema":{"$ref":"#/definitions/CreateCampaignData"}},"UpdateCampaign":{"name":"campaign","in":"body","description":"data to update a campaign","required":true,"schema":{"$ref":"#/definitions/UpdateCampaignData"}},"CreateList":{"name":"list","in":"body","description":"data to create a list","required":true,"schema":{"$ref":"#/definitions/CreateListData"}},"UpdateList":{"name":"list","in":"body","description":"data to update a list","required":true,"schema":{"$ref":"#/definitions/UpdateListData"}},"CreateRecipient":{"name":"recipient","in":"body","description":"data to create a recipient","required":true,"schema":{"$ref":"#/definitions/CreateRecipientData"}},"UpdateRecipient":{"name":"recipient","in":"body","description":"data to update a recipient","required":true,"schema":{"$ref":"#/definitions/UpdateRecipientData"}}},"responses":{"AuthError":{"description":"Authorization error","schema":{"$ref":"#/definitions/Error"}},"UncrossableEntity":{"description":"Uncrossable entity error","schema":{"$ref":"#/definitions/Error"}},"GeneralError":{"description":"Bad request error","schema":{"$ref":"#/definitions/Error"}}},"definitions":{"Empty":{"type":"object"},"Error":{"type":"object","required":["message","status"],"properties":{"message":{"type":"string"},"status":{"type":"integer","format":"int32"}}},"NextPage":{"type":"string","description":"hash value to get next page"},"PrevPage":{"type":"string","description":"hash value to get previous page"},"Id":{"type":"string"},"Name":{"type":"string"},"Email":{"type":"string","format":"email"},"Body":{"type":"string"},"CampaignStatus":{"type":"string","description":"one of draft, pending, sending, sent, quotaExceeded"},"RecipientStatus":{"type":"string","description":"one of subscribed, unsubscribed, awaiting, bounced, spam"},"Date":{"type":"integer","format":"int32","description":"timestamp in unix format"},"Subject":{"type":"string"},"ListIds":{"type":"array","description":"array of list ids","items":{"type":"string"}},"Campaign":{"type":"object","required":["id","name","status"],"properties":{"id":{"$ref":"#/definitions/Id"},"name":{"$ref":"#/definitions/Name"},"status":{"$ref":"#/definitions/CampaignStatus"},"createdAt":{"$ref":"#/definitions/Date"},"sentAt":{"$ref":"#/definitions/Date"}}},"FullCampaign":{"type":"object","required":["id","name","status","listIds"],"properties":{"id":{"$ref":"#/definitions/Id"},"name":{"$ref":"#/definitions/Name"},"status":{"$ref":"#/definitions/CampaignStatus"},"createdAt":{"$ref":"#/definitions/Date"},"sentAt":{"$ref":"#/definitions/Date"},"subject":{"$ref":"#/definitions/Subject"},"listIds":{"$ref":"#/definitions/ListIds"},"body":{"$ref":"#/definitions/Body"}}},"CreateCampaignData":{"type":"object","required":["name"],"properties":{"name":{"$ref":"#/definitions/Name"}}},"UpdateCampaignData":{"type":"object","properties":{"name":{"$ref":"#/definitions/Name"},"subject":{"$ref":"#/definitions/Subject"},"listIds":{"$ref":"#/definitions/ListIds"},"body":{"$ref":"#/definitions/Body"}}},"List":{"type":"object","required":["id","name","createdAt","recipientsCount"],"properties":{"id":{"$ref":"#/definitions/Id"},"name":{"$ref":"#/definitions/Name"},"createdAt":{"$ref":"#/definitions/Date"},"recipientsCount":{"type":"integer","format":"int32"}}},"CreateListData":{"type":"object","required":["name"],"properties":{"name":{"$ref":"#/definitions/Name"}}},"UpdateListData":{"type":"object","properties":{"name":{"$ref":"#/definitions/Name"}},"example":{"name":"New test list"}},"Recipient":{"type":"object","required":["id","email","createdAt"],"properties":{"id":{"$ref":"#/definitions/Id"},"email":{"$ref":"#/definitions/Email"},"createdAt":{"$ref":"#/definitions/Date"},"status":{"$ref":"#/definitions/RecipientStatus"},"metadata":{"type":"object","properties":{"name":{"$ref":"#/definitions/Name"},"surname":{"$ref":"#/definitions/Name"}}}},"example":{"id":"cipfl7c85000001qgupg20f06","createdAtAt":1463384971,"name":"New list","recipientsCount":1234}},"CreateRecipientData":{"type":"object","required":["email"],"properties":{"email":{"$ref":"#/definitions/Email"},"metadata":{"type":"object","properties":{"name":{"$ref":"#/definitions/Name"},"surname":{"$ref":"#/definitions/Name"}}}}},"UpdateRecipientData":{"type":"object","properties":{"metadata":{"type":"object","properties":{"name":{"$ref":"#/definitions/Name"},"surname":{"$ref":"#/definitions/Name"}}}}}}}